@using EindwerkCarParkingCore.Models
@model List<ParkingsDTO>

<!DOCTYPE html>
<html lang="nl-BE">
<head>
    <meta charset="utf-8">

    <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Nadrukkelijk compatibel voor mobiele apparaten -->



</head>
<body class="bodyeigenschappen">
    <!-- semiparallaxbody in css niet nodig dankzij de parallax - plugin -->
    <header>







        <a id="tagboven"></a>
        <div class="page-header header ">
            <br>
            @*<img src="~/Afbeeldingen/Parking-Checker.jpg" alt="Logo">*@
        </div>



    </header>

    <nav class="navbar navbar-default navbar-fixed-top  visibleonhover">

        <div class="container-fluid">
            <!-- Brand and toggle samen mooier op smartphones -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <label> <a class="navbar-brand" href="#">Parking-Checker</a></label>
            </div>

            <!-- dropdown-uitklapper -->
            <div class="collapse navbar-collapse altijdoproepbarenavbar" id="bs-example-navbar-collapse-1">

                <ul class="nav navbar-nav navbar-right ">


                    <li><a href="Index.html">Thuis</a></li>
                    <li class="dropdown">
                        <a href="Productpagina.html" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Steden<span class="caret"></span></a>
                        <ul class="dropdown-menu" role="menu">
                            @foreach (ParkingsDTO b in Model)
                            {
                                <li>
                                    <b><a href="#" data-id="@b.Id" class="bookTitle">@b.ParkingNaam</a></b> <i>@b.GemeenteGemeenteNaam</i>
                                </li>

                            }

                        </ul>
                    </li>
                    <li><a href="Contact.html">Contact</a></li>

                </ul>
            </div><!-- /.navbar-collapse -->
        </div><!-- /.container-fluid -->

    </nav>



    <article>

        <div class="parallaxbody ">

            <div class="container-fluid ">
                <!--http://getbootstrap.com/css/-->
                <br>

                <div class="row ">
                    <div>
                        <div>

                        </div>
                    </div>
                    <div class="col-md-1">
                        <div class="linkernavigatie">
                            <!--   http://www.tutorialspoint.com/bootstrap/bootstrap_list_group.htm -->
                            <ul class="list-group">
                                <li class="list-group-item"><a href=#tagboven> Boven</a></li>
                                <li class="list-group-item"><a href=#tagmid>Midden</a></li>
                                <li class="list-group-item"><a href=#tagonder>Onder</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-md-1"> <br></div> <!-- Om afstand te hebben op de zwevende linkernav-->

                    <div class="col-md-8 rondehoekindex">
                        <a id="tagmid"></a><p>
                            <br><b>Parking-Checker</b> Is een fictieve site voor ons eindwerk voor onze studies die we in<i>Howest Brugge</i> gevolgd hebben. Het eindwerk in opdracht van William. <br> Onze parking-checker zou de gebruiker moeten informeren waar er nog parkeerplaatsen vrij zijn. <br> <br>
                            Weergave met  kleuverandering groen = vrij, oranje = bijna volzet, rood volzet. <br>Indien u eigenaar bent van een parkeer-site en u wilt deze graag in onze app aanwezig zien aarzel niet om ons te contacteren.
                            <br> Deze staat nog in zijn kinderschoenen en willen we nog verder uitbreiden zodat de gebruiker via ingave adres naar de dichtst bijzijnde parking geleid word.<br>  <br> Dit allemaal voor ons schoolproject <br> <br> Stuur gerust uw bevindingen van deze site naar ons zodat wij als student-hobbyist deze kunnen verbeteren.

                            <br><br><br><br>	<br><br>	<img id="imgpos" src="~/Afbeeldingen/Parking-Checker.jpg" alt="Parking-Checker">
                            <br>
                        </p>
                        <br> <br>
                    </div>
                    <div class="col-md-1"><br>  </div>

                </div>
            </div>
            <br>
        </div>
        <section id="disclaimer">
            <!--http://www.w3.org/wiki/HTML_structural_elements#.3Csection.3-->
        </section>
        <br><br><br>
    </article>



    <footer>
        <div class="navbar navbar-default  navbar-static-bottom ">
            <div class="container">
                <p class="navbar-text">  &copy;2018 - Howest Brugge (Cursisten Benny en Steven) </p>  <a id="tagonder"></a>
            </div>
        </div>
    </footer>



    @*<!-- <script src="javascript/jquery-1.11.2.js"></script>  jquery file -->
        <script src="localecode/javascript/localejs.js"></script> <!-- Locale bewerkingen uitvoeren (eigen javascript file) -->

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script> <!-- Nodig voor de bootstrap's javascript plugins -->
        <script src="plugins/bootstrap/js/bootstrap.min.js"></script> <!-- Locale verwijzing naar bootstrap 3.3.2 -->
        <!-- js code voor slick carousel (eenvoudiger dan owl carousel, maar even efficiënt => dit eventueel voor later maar nog niet willen gebruiken) -->

        <script src="plugins/parallax.js/parallax.js"></script> <!-- Goed uitgewerkt parallax effect -->

        <script type="text/javascript" src="plugins/jquery.cookiebar/jquery.cookiebar.js"></script> <!-- js cookiebar disclaimer onderdeel-->*@


    <!--Hieronder toevoeging test google maps-->
    <!-- AIzaSyCeiTZY7jXETj0MpKuUbKwN_CqeUzv0v-M -->
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCeiTZY7jXETj0MpKuUbKwN_CqeUzv0v-M&libraries=places&callback=initAutocomplete"
            async defer></script>
    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script src="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.9/jquery-ui.js" type="text/javascript"></script>
    <link href="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.9/themes/blitzer/jquery-ui.css" rel="stylesheet" type="text/css" />
    <!--Hierboven toevoeging test google maps -->


    <script type="text/javascript">
 @*<!-- Parallax.js uitwerking  http://pixelcog.github.io/parallax.js/ -->*@
//$('.parallaxbody').parallax({imageSrc: '/Afbeeldingen/achtergrond.jpg'});

    </script>

    <script type="text/javascript">
 @*<!-- De jquery.cookiebar.css file is een eenvoudig bewerkbaar bestand -->*@
$(document).ready(function(){
  $.cookieBar({
 	message: 'Parking-Checker is een fictieve site als eindproject voor onze HBO5 Opleiding Howest Brugge. De site is in beheer van de cursisten Benny en Steven. Alle acties en communicatie via de site Parking-Checker zijn fictief en niet rechtsgeldig. Overeenkomsten met ... of geregistreerde merknamen zijn niet intentioneel en hebben enkel educatieve doeleinden. Aanvullend: door "Akkoord" aan te klikken, krijgen we toestemming om cookies op uw computer te bewaren.',
    acceptButton: true,
    acceptText: 'Akkoord',
    autoEnable: true,
    acceptOnContinue: false,
    forceShow: true,
    element: 'section',
    append: true,
    fixed: false,
    bottom: false
}


  );
});		</script>


    <!-- Hieronder bootstrap uitwerken voor modal view -->
    <!-- Bootstrap Modal -->
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document" style="left:0;">
            <!--om modal links weer te geven-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
                    <h4 class="modal-title" id="myModalLabel">ParkingDetail</h4>
                </div>
                <div class="modal-body">
                    Hier komen de detailgegevevens van een parking.
                </div>
                <div class="modal-content" id="dvMap" style="height: 350px; width: 350px; margin: auto">
                    Hier voorlopig style google maps weergave tot alles uitgewerkt is
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Sluiten</button>
                    @*<button type="button" class="btn btn-primary">Save changes</button>*@
                </div>
            </div>
        </div>
    </div>


    @section scripts
        {


        <script>
            $(document).ready(function () {
                var url = 'http://' + window.location.host + '/api/parkings/';

                var infoModal = $('#myModal');
                $('.parkingNaam').on('click', function () {
                    $.ajax({
                        type: "GET",
                        url: url + $(this).data('id'),
                        dataType: 'json',
                        success: function (data) {
                            showParking('Parking Details', data);
                        }
                    });
                });

                showParking = function (header, parking) {
                    var htmlData = '<h4>' + parking.ParkingNaam + '</h4><hr>';
                    htmlData += '<p>Gemeente :' + parking.GemeenteGemeenteNaam + '</p>';
                    htmlData += '<br>Straat :' + parking.LocatieStraat;
                    //var street = parking.LocatieStraat;
                    //var city = parking.GemeenteGemeenteNaam;
                    //try {
                    //    StringBuilder queryaddres = new StringBuilder();
                    //    queryaddres.Append("http://map.google.com/maps?q=");
                    //}
                    //if (street != string.Empty) {
                    //    queryadres.Append(street + "," + "+");
                    //}
                    //Navigate(queryaddres.ToString());

                    //catch (Exception ex) {
                    //MessageBox.Show(ex.Message.ToString(), "error");
                    //};

                    ////////////////////////////////////////////// https://stackoverflow.com/questions/15925980/using-address-instead-of-longitude-and-latitude-with-google-maps-api
                    ////////////// "{StreetNumber} {Street}, {Suburb}, Western Australia"; 'San Diego, CA'
                    var geocoder;
                    var map;
                    var address = htmlData; //hier manuele address vervangen door htmlData
                    //function initialize() {
                    geocoder = new google.maps.Geocoder();
                    var latlng = new google.maps.LatLng(-34.397, 150.644);
                    var myOptions = {
                        zoom: 8,
                        center: latlng,
                        mapTypeControl: true,
                        mapTypeControlOptions: { style: google.maps.MapTypeControlStyle.DROPDOWN_MENU },
                        navigationControl: true,
                        mapTypeId: google.maps.MapTypeId.ROADMAP
                    };


                    map = new google.maps.Map($("#dvMap")[0], myOptions);
                    if (geocoder) {
                        geocoder.geocode({ 'address': address }, function (results, status) {
                            if (status == google.maps.GeocoderStatus.OK) {
                                if (status != google.maps.GeocoderStatus.ZERO_RESULTS) {
                                    map.setCenter(results[0].geometry.location);

                                    var infowindow = new google.maps.InfoWindow(
                                        {
                                            content: '<b>' + address + '</b>',
                                            size: new google.maps.Size(150, 50)
                                        });
                                    //var image = '/Afbeeldingen/ico/Parkingblauw.ico';
                                    var marker = new google.maps.Marker({
                                        position: results[0].geometry.location,
                                        map: map,
                                        //icon: image,
                                        animation: google.maps.Animation.BOUNCE

                                    });
                                    google.maps.event.addListener(marker, 'click', function () {
                                        infowindow.open(map, marker);
                                    });

                                } else {
                                    alert("No results found");
                                }
                            } else {
                                alert("Geocode was not successful for the following reason: " + status);
                            }


                        });
                    }
                    //}

                    //////////////////////////////////////////////


                    //var mapOptions = {
                    //    center: new google.maps.LatLng(19.0606917, 72.83624970000005),
                    //    zoom: 18,
                    //    mapTypeId: google.maps.MapTypeId.ROADMAP
                    //}
                    //var map = new google.maps.Map($("#dvMap")[0], mapOptions);
                    infoModal.find('.modal-header').html(header);
                    infoModal.find('.modal-body').html(htmlData);
                    infoModal.modal('show');
                }



                var newParking = {
                    ParkingNaam: 'Langestraat',
                    //Totaal: 1500,
                    //Bezet: 100,
                    GemeenteGemeenteNaam: 'Brugge',
                    //EigenaarId: 2,
                    //EigenaarNaam: 'Kabouter plop',
                    //SoortId: 2,
                    //SoortNaam: 'kwebbel',
                    //LocatieId: 2,
                    Straat: 'Kortestraat',

                    // We moeten de authorname opvullen om deze straks te kunnen tonen -->
                    // controllermethod heeft enkel Id van Author nodig voor Insert
                    // maar doet bij ons geen nieuwe query naar entity

                }

                //$('#btnAdd').on('click', function () {
                //    $.ajax({
                //        type: "POST",
                //        url: url,
                //        dataType: 'json',
                //        data: newParking,
                //        success: function (data) {
                //            newParking = data;
                //            showParking('Added Parking:', data);
                //        }
                //    });
                //});

                //$('#btnUpdate').on('click', function () {
                //    newParking.ParkingNaam = 'Langestraat';
                //    $.ajax({
                //        type: "PUT",
                //        url: url + newParking.Id,
                //        dataType: 'json',
                //        data: newParking,
                //        success: function (data) {
                //            showParking('Updated Parking:', data);
                //        }
                //    });
                //});

                //$('#btnDelete').on('click', function () {
                //    $.ajax({
                //        type: "DELETE",
                //        url: url + newParking.Id,
                //        dataType: 'json',
                //        data: newParking,
                //        success: function (data) {
                //            showParking('DELETED Parking:', data);
                //        }
                //    });
                //});
            });
        </script>
    }
</body>
</html>
